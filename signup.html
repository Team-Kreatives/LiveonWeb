<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>signup</title>
    <link rel="stylesheet" href="./style.css">
    <link rel="stylesheet" href="./signup.css">
</head>
<body>
    <!-- headeer  -->
    <section class="all">
        <div class="topper">
               <div class="topper">
                <img src="./images/Frame 8.png" alt="">
               </div>
               <ul>
                <li class="topper">End-of-life planning <img src="./images/Vector.png" alt="" style="width: 10px; height: 10px; padding-left: 2px;"></li> 
                <li class="topper"><a href="./about.html">Who we are</a></li>  
                <li class="topper"><a href="#work"></a>  How it works</li> 
                <li class="topper"> <a href="./contact.html"> Contact us</a></li> 
                <li class="topper"> <a href="./login.html">Login</a> </li>
                <div>
                 <button><a href="./signup.html">sign Up</a></button>
                </div>
                </ul>
            </div>
        </section>
    <!-- end header  -->
   <section class="new-all">
    <div class="input">
        <div class="total">
            <div class="google">
                <img src="./images/google1.png" alt="">
                <p>Sign up with Google</p>
            </div>
            <div class="google">
                <img src="./images/Facebook.png" alt="">
                <p>Sign up with Facebook</p>
            </div>
        </div>

        <!-- <form action="" type="submit"> -->
            <div class="email">

                <div class="email">
                    <h1>
                        Full Name
                    </h1>
                    <div class="cl">
                    <img src="./images/user.png " alt="">
                    <input type="text" required placeholder="full name" id="username">
                    </div>
                </div>
                <div class="email">
                    <h1>
                        Email
                    </h1>
                    <div class="cl">
                    <img src="./images/sms.png" alt="">
                    <input type="email" required placeholder="help.liveon@gmail.com" id="email">
                   </div>
                </div>
                <div class="email">
                    <h1>
                        password
                    </h1>
                    <div class="cl" >
                    <img src="./images/lock.png" alt="">
                    <input type="text and number" required placeholder="Minimum 8 characters" id="password">
                </div>
                </div>
        
                </div>
                <div>
                    <input type="submit" class="free"  id='sighUp' name="signup_submit" value="Create my free Account">
                    <!-- <button class="free"  id='sighUp' name="signup_submit"><a href="./authentication.html">Create my free Account</a> </button> -->
                </div>
        <!-- </form> -->
        <div class="up">
            <h1>
                By signing up, I agree to LiveOnâ€™s <span class="colour"> Terms of Service</span> and <span class="colour">Privacy Policy.</span>
            </h1>
        </div>

    </div>
   
   </section>

   <script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-app.js";
  import { getAnalytics } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-analytics.js";
  import { getDatabase, set, ref, update, push  } from "https://www.gstatic.com/firebasejs/9.15.0/firebase-database.js";
  import { getAuth, createUserWithEmailAndPassword, signInWithEmailAndPassword, onAuthStateChanged, signOut, updateProfile} from "https://www.gstatic.com/firebasejs/9.15.0/firebase-auth.js";
//   import {  updateProfile } from "firebase/auth"
  const firebaseConfig = {
    apiKey: "AIzaSyCIKlgBFTRs2u2qBzZaZqoFhSjykRkk71Y",
    authDomain: "liveon-4fa75.firebaseapp.com",
    databaseURL: "https://liveon-4fa75-default-rtdb.firebaseio.com",
    projectId: "liveon-4fa75",
    storageBucket: "liveon-4fa75.appspot.com",
    messagingSenderId: "641102602271",
    appId: "1:641102602271:web:876e657551075239b0b52a",
    measurementId: "G-9RQS587BPM"
  };

  const app = initializeApp(firebaseConfig);
  const database = getDatabase(app);
  const analytics = getAnalytics(app);
    const auth = getAuth();
    const sighUp = document.querySelector('#sighUp')
console.log('i8u87');
    sighUp.addEventListener('click',(e) => {
        console.log(sighUp);
var email = document.getElementById('email').value;
var password = document.getElementById('password').value;
var username = document.getElementById('username').value;

createUserWithEmailAndPassword(auth, email, password)
  .then((userCredential) => {
   // Signed in 
    const user = userCredential.user;

updateProfile( auth.currentUser, {
  displayName: username,
}).then(() => {

    set(ref(database, 'users/' + user.uid),{
        username: username,
        email: email
    })
//     const postListRef = ref(database, 'users');
// const newPostRef = push(postListRef);
// set(newPostRef, {
//     username: username,
//         email: email,
//         uid: user.uid
// });
// const db = getDatabase();
// set(ref(data, 'users/' + user.uid), {
//   username: username,
//   email: email,
// })
// .then(() => {
//   // Data saved successfully!
//   console.log('saved');
// })
// .catch((error) => {
//   // The write failed...
//   console.log('error');
// });

    alert('user created!');
    window.location.replace("./login.html");
})

   
    // ...
  })
  .catch((error) => {
    const errorCode = error.code;
    const errorMessage = error.message;

    alert(errorMessage);
  // ..
  });

});

  </script>
    
</body>
</html>